#!/bin/bash

# Update and upgrade packages
sudo pacman -Syu

# Install xorg display server and xinit
sudo pacman -S xorg xorg-xinit

# Install necessary packages for Qtile
sudo pacman -S libxcb python-xcffib python-cairocffi libpqxx libpulse libmpdclient libnotify jsoncpp

# Install pip for Python 3
sudo pacman -S python-pip
# Install qtile and dependencies with pip
sudo pip3 install xcffib qtile psutil

# Install LightDM display manager and greeter
sudo pacman -S lightdm lightdm-gtk-greeter

# Enable LightDM service
sudo systemctl enable lightdm.service

# Install a terminal emulator (example: alacritty)
sudo pacman -S alacritty

# Install file manager (example: pcmanfm)
sudo pacman -S pcmanfm

# Install network manager and applet
sudo pacman -S networkmanager network-manager-applet

# Install sound packages
sudo pacman -S pulseaudio pulseaudio-alsa pavucontrol

# Install additional packages for customization
sudo pacman -S feh lxappearance arc-gtk-theme papirus-icon-theme picom dunst rofi nitrogen exa htop

# Set up autostart file for Qtile
echo "exec qtile" >> ~/.xinitrc

# Allow LightDM to start Qtile
echo "exec qtile" > ~/.xsession

# Reboot system to finish installation
sudo reboot
